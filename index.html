<html>
  <head>
    <meta charset="utf-8">
    <title>Jade</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <link rel = "stylesheet" type = "text/css" href = "Styles.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  </head>
  <body>
    <div>
      <video autoplay loop muted playsinline class = "video" id = "video">
        <source  src = "Home Page Time Lapse.mp4" type="video/mp4">
        Your browser does not support embedded videos.
      </video>
      <div id="landing">
        <div>
          <h1>Experience The World Through Jade</h1>
          <p>We aim to bring a breath of fresh air to ride-sharing</p>
        </div>
        <div id="button">
          <button class="btn"
          onClick="document.getElementById('about').scrollIntoView(false);">
          Explore</button>
        </div>
      </div>
    </div>
    <div class ="navbar">
      <a onClick="googleSignout()" id="logout" class = "hidden">Sign Out</a>
      <a onClick="googleSignin()">Login</a>
      <a href="contact.html">Contact Us</a>
      <a onClick="document.getElementById('drive').scrollIntoView(false);">
        Drive</a>
      <a onClick="document.getElementById('ride').scrollIntoView(false);">
        Ride</a>
      <a onClick="document.getElementById('about').scrollIntoView(false);">
        About Us</a>
      <a onClick="document.getElementById('video').scrollIntoView();">Home</a>
      <img src="Jade logo.png" alt="Jade Logo" id = "logo">
      <label id="username"></label>
    </div>
    <section id="about">
      <div class="header">
        <h1 align="center">About Us</h1>
      </div>
      <div class="boxContainer" data-aos="fade-up">
        <div id="box1">
          <image src="car.png" alt="Car" width=200px height=200px
          class="center">
          <p>Ride-sharing is all about conevenience and efficiency. Jade
          provides fast rides with little to no hiccups.</p>
        </div>
        <div id="box2">
          <image src="environment.png" alt="Environment" width=200px
          height=200px class="center">
          <p>Why are we different from the leading ride-sharing apps? Our fleet
            of drivers consist of only zero emission electric vehicles.</p>
        </div>
        <div id="box3">
          <image src="money.png" alt="Money" width=200px height=200px
          class="center">
          <p>We offer competitive pay for our drivers and the lowest fares for
            our riders.</p>
        </div>
      </div>
    </section>
    <section id="ride">
      <div class="header">
        <h1 align="center">Ride</h1>
      </div>
      <div class="boxContainer" data-aos="fade-up">
        <div style="display: none">
          <input id="origin-input" class="controls" type="text"
              placeholder="Enter an origin location">

          <input id="destination-input" class="controls" type="text"
              placeholder="Enter a destination location">

          <div id="mode-selector" class="controls">
            <input type="radio" name="type" id="changemode-walking"
            checked="checked">
            <label for="changemode-walking">Walking</label>

            <input type="radio" name="type" id="changemode-transit">
            <label for="changemode-transit">Transit</label>

            <input type="radio" name="type" id="changemode-driving">
            <label for="changemode-driving">Driving</label>
          </div>
        </div>
        <div id="map">
        </div>
        <div id="box3">
          <image src="route.png" alt="route" width=25% height=25%
          class="center">
          <p>Jade incorporates walking, ride-sharing, and transportation routes
            to your destination so that you can compare routes prior to booking
            a ride.</p>
          <button class="btnContent">Book Ride!</button>
        </div>
      </div>
      <script>
        var map;
        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            mapTypeControl: false,
            center: {lat: 37.3352 , lng: -121.8811},
            zoom: 16});
          var trafficLayer = new google.maps.TrafficLayer();
          trafficLayer.setMap(map);
          new AutocompleteDirectionsHandler(map);
        }
        function AutocompleteDirectionsHandler(map) {
          this.map = map;
          this.originPlaceId = null;
          this.destinationPlaceId = null;
          this.travelMode = 'WALKING';
          this.directionsService = new google.maps.DirectionsService;
          this.directionsRenderer = new google.maps.DirectionsRenderer;
          this.directionsRenderer.setMap(map);

          var originInput = document.getElementById('origin-input');
          var destinationInput = document.getElementById('destination-input');
          var modeSelector = document.getElementById('mode-selector');

          var originAutocomplete = new google.maps.places.Autocomplete(
            originInput);
          // Specify just the place data fields that you need.
          originAutocomplete.setFields(['place_id']);

          var destinationAutocomplete =
              new google.maps.places.Autocomplete(destinationInput);
          // Specify just the place data fields that you need.
          destinationAutocomplete.setFields(['place_id']);

          this.setupClickListener('changemode-walking', 'WALKING');
          this.setupClickListener('changemode-transit', 'TRANSIT');
          this.setupClickListener('changemode-driving', 'DRIVING');

          this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
          this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

          this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(
            originInput);
          this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(
              destinationInput);
          this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(
            modeSelector);
        }

        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        AutocompleteDirectionsHandler.prototype.setupClickListener = function(
            id, mode) {
          var radioButton = document.getElementById(id);
          var me = this;

          radioButton.addEventListener('click', function() {
            me.travelMode = mode;
            me.route();
          });
        };

        AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener =
        function(autocomplete, mode) {
          var me = this;
          autocomplete.bindTo('bounds', this.map);

          autocomplete.addListener('place_changed', function() {
            var place = autocomplete.getPlace();

            if (!place.place_id) {
              window.alert('Please select an option from the dropdown list.');
              return;
            }
            if (mode === 'ORIG') {
              me.originPlaceId = place.place_id;
            } else {
              me.destinationPlaceId = place.place_id;
            }
            me.route();
          });
        };

        AutocompleteDirectionsHandler.prototype.route = function() {
          if (!this.originPlaceId || !this.destinationPlaceId) {
            return;
          }
          var me = this;

          this.directionsService.route(
              {
                origin: {'placeId': this.originPlaceId},
                destination: {'placeId': this.destinationPlaceId},
                travelMode: this.travelMode
              },
              function(response, status) {
                if (status === 'OK') {
                  me.directionsRenderer.setDirections(response);
                } else {
                  window.alert('Directions request failed due to ' + status);
                }
              });
        };
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmbf4XA2i69TZnny_x2TyBnuuXYWPQTjw&libraries=places&callback=initMap"
    async defer></script>
    </section>
    <section id="drive">
      <div class="header">
        <h1 align="center">Drive</h1>
      </div>
      <div class="boxContainer" data-aos="fade-up">
        <div id="driveSignUpBox">
          <image src="car.png" alt="Car" width=25% height=25%
          class="center">
          <p>Would you like to be a part of the global team that drives Jade?
            Start today by filling out an application!</p>

            <button class="btnContent">Drive with Jade</button>
        </div>
        <div id="driveBox">
          <video autoplay loop muted playsinline class = "video" id = "tunnel">
            <source  src = "tunnel.mp4" type="video/mp4">
            Your browser does not support embedded videos.
          </video>
        </div>
      </div>
    </section>
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="/__/firebase/7.5.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-auth.js">
    </script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-database.js">
    </script>
    <script src="/__/firebase/7.5.0/firebase-firestore.js"></script>
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyAz-XqvWNK9sz99IapkZ1_fFvqHjEagdNc",
        authDomain: "jade-1575089849041.firebaseapp.com",
        databaseURL: "https://jade-1575089849041.firebaseio.com",
        projectId: "jade-1575089849041",
        storageBucket: "jade-1575089849041.appspot.com",
        messagingSenderId: "654073477285",
        appId: "1:654073477285:web:2677feb20856620673f54c"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      window.addEventListener("load", initializeAccount, false);
      window.addEventListener("load", initializeLogout, false);
      var account;
      var logout;
      function initializeLogout() {
            logout = document.getElementById("logout");
      }
      function initializeAccount() {
            account = document.getElementById("username");

          }
      var provider = new firebase.auth.GoogleAuthProvider();
      function googleSignin() {
         firebase.auth().signInWithPopup(provider).then(function(result) {
            var token = result.credential.accessToken;
            var user = result.user;
            account.innerHTML = "Welcome, " + user.displayName + "!"
            logout.ClassList.remove("hidden");

         }).catch(function(error) {
            var errorCode = error.code;
            var errorMessage = error.message;

            console.log(error.code)
            console.log(error.message)
         });
        }

        function googleSignout() {
         firebase.auth().signOut().then(function() {
            username.innerHTML = "";
            console.log('Signout Succesfull')
         }, function(error) {
            console.log('Signout Failed')
         });
        }
    </script>
  </body>
</html>
